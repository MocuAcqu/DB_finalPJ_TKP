<div class="tab-bar-container">
    <div class="tab-bar item-status-tabs">
        <a href="{{ url_for('main.index', role='seller', tab='items', item_status='available') }}"
        class="tab-item {% if current_item_status == 'available' %}active{% endif %}">
        可交易
        </a>
        <a href="{{ url_for('main.index', role='seller', tab='items', item_status='completed') }}"
        class="tab-item {% if current_item_status == 'completed' %}active{% endif %}">
        已完成
        </a>
    </div>
</div>

<div class="seller-items-header"
     style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <a href="{{ url_for('main.upload_item') }}" class="btn-upload">
        + 上架新商品
    </a>
</div>

<div class="items-grid"
     style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
    {% if items %}
        {% for item in items %}
            <div class="item-card"
                 style="border-radius: 8px; overflow: hidden;
                        background: #fff; display: flex; flex-direction: column;">

                <div class="item-image"
                     style="height: 200px; overflow: hidden; background: #f8f9fa;">
                    <img src="{{ url_for('main.get_image', image_id=item.image_id) }}"
                         alt="{{ item.name }}"
                         style="width: 100%; height: 100%; object-fit: cover;"
                         class="zoomable-image">
                    {% if item.status != 'available' %}
                        <div class="item-status-overlay">
                            <span>{{ '已完成' if item.status == 'completed' else '已取消' }}</span>
                        </div>
                    {% endif %}
                </div>

                <div class="item-details" style="padding: 15px; flex-grow: 1;">
                    <h3 style="margin: 0 0 10px 0;">{{ item.name }}</h3>
                    <p style="color: #666; font-size: 0.9em; margin-bottom: 15px;">
                        {{ item.description }}
                    </p>
                </div>

                <div class="item-actions"
                     style="padding: 15px; border-top: 1px solid #eee; display: flex; gap: 10px;">
                    {% if item.status == 'available' %}
                        <a href="{{ url_for('main.edit_item', item_id=item.id) }}"
                        style="flex: 1; text-align: center; background-color: #4e98d5;
                                color: white; text-decoration: none; padding: 8px; border-radius: 4px;">
                            編輯
                        </a>

                        <form action="{{ url_for('main.delete_item', item_id=item.id) }}"
                            method="POST"
                            style="flex: 1;"
                            onsubmit="return confirm('確定要刪除這個物品嗎？此動作無法復原。');">
                            <button type="submit"
                                    style="width: 100%; background-color: #cf483f; color: white;
                                        border: none; padding: 8px; border-radius: 4px;
                                        cursor: pointer; font-size: 1rem;">
                                刪除
                            </button>
                        </form>
                    {% else %}
                        <button class="btn-disabled" disabled>{{ '交易已完成' if item.status == 'completed'}}</button>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p style="grid-column: 1/-1; color:#ddd; font-size: 1.2rem;">這個分類下沒有物品</p>
    {% endif %}
</div>

