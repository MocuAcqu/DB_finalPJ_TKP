{% extends 'layouts/base.html' %}

{% block content %}
<div class="upload-container" style="max-width: 800px; margin: 2rem auto; padding: 2rem; background: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h2>上架新商品</h2>
    <hr>
    
    <form action="{{ url_for('main.upload_item') }}" method="POST" enctype="multipart/form-data">
        
        <div class="form-group">
            <label for="name">商品名稱 <span style="color:red;">*</span></label>
            <input type="text" id="name" name="name" required class="form-control" placeholder="例如：全新 Switch 遊戲機">
        </div>

        <div class="form-group">
            <label for="image">商品圖片 <span style="color:red;">*</span></label>
            <input type="file" id="image" name="image" required accept="image/*" class="form-control">
            <small style="color: #666;">支援 jpg, png, gif 格式</small>
        </div>

        <div class="form-group">
            <label for="description">商品敘述</label>
            <textarea id="description" name="description" rows="5" class="form-control" placeholder="請詳細描述商品狀況..."></textarea>
        </div>

        <div class="form-group">
            <label for="tags">商品關鍵字 (Tags)</label>
            <input type="text" id="tags" name="tags" class="form-control" placeholder="用逗號分隔，例如：電子產品, 遊戲, 二手">
        </div>

        <div class="form-group">
            <label>交易方式 <span style="color:red;">*</span></label>
            <div class="radio-group" style="margin-top: 5px;">
                <label style="margin-right: 15px;">
                    <input type="radio" name="transaction_type" value="sell" checked onchange="toggleFields()"> 買賣 (出售)
                </label>
                <label style="margin-right: 15px;">
                    <input type="radio" name="transaction_type" value="rent" onchange="toggleFields()"> 租借
                </label>
                <label>
                    <input type="radio" name="transaction_type" value="exchange" onchange="toggleFields()"> 交換
                </label>
            </div>
        </div>

        <div class="form-group" id="price-field">
            <label for="price">價格 (TWD) <span style="color:red;">*</span></label>
            <input type="number" id="price" name="price" class="form-control" placeholder="請輸入金額">
        </div>

        <div class="form-group" id="exchange-field" style="display: none;">
            <label for="exchange_want">想換的東西關鍵字 <span style="color:red;">*</span></label>
            <input type="text" id="exchange_want" name="exchange_want" class="form-control" placeholder="例如：PS5 遊戲片, 腳踏車...">
        </div>

        <div style="margin-top: 30px;">
            <button type="submit" style="background-color: #28a745; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 1.1rem;">
                確認上架
            </button>
            <a href="{{ url_for('main.index', role='seller', tab='items') }}" style="margin-left: 15px; color: #666; text-decoration: none;">取消</a>
        </div>
    </form>
</div>

<script>
    // 簡單的 JS 來切換顯示欄位
    function toggleFields() {
        const type = document.querySelector('input[name="transaction_type"]:checked').value;
        const priceField = document.getElementById('price-field');
        const exchangeField = document.getElementById('exchange-field');
        const priceInput = document.getElementById('price');
        const exchangeInput = document.getElementById('exchange_want');

        if (type === 'exchange') {
            priceField.style.display = 'none';
            exchangeField.style.display = 'block';
            priceInput.required = false;
            exchangeInput.required = true;
        } else {
            priceField.style.display = 'block';
            exchangeField.style.display = 'none';
            priceInput.required = true;
            exchangeInput.required = false;
        }
    }
</script>

<style>
    .form-group { margin-bottom: 20px; }
    .form-control { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
</style>
{% endblock %}